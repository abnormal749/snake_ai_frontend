@layer utilities {
  .font-press-start {
    font-family: var(--font-press-start);
  }
  
  .font-vt323 {
    font-family: var(--font-vt323);
  }

  .rendering-pixelated {
    image-rendering: pixelated;
  }

  /* --- Complex Textures (Utilities) --- */
  .bg-sky-dither {
    background-color: var(--color-sky-base);
    background-image: 
        radial-gradient(var(--color-sky-light) 25%, transparent 25%),
        radial-gradient(var(--color-sky-light) 25%, transparent 25%);
    background-position: 0 0, 4px 4px;
    background-size: 8px 8px;
  }

  .bg-wood-texture {
    background-color: var(--color-wood-bg);
    background-image: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 4px,
        var(--color-wood-line) 4px,
        var(--color-wood-line) 8px
    );
  }
  
  .bg-soil-pattern {
    background-color: var(--color-soil-bg);
    background-image: radial-gradient(var(--color-soil-dot) 2px, transparent 0);
    background-size: 8px 8px;
  }

  /* --- Animations --- */
  @keyframes float {
    from { transform: translateX(100vw); }
    to { transform: translateX(-200px); }
  }
  
  .animate-float {
    animation: float linear infinite;
  }
}

@layer components {
  /* --- Game Components --- */

  /* Wood Panel */
  .c-panel-wood {
    @apply shadow-2xl;
    font-family: var(--font-vt323);
    background-color: var(--color-wood-bg);
    background-image: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 4px,
        var(--color-wood-line) 4px,
        var(--color-wood-line) 8px
    );
    border: 4px solid var(--color-wood-border);
    box-shadow: 
        inset 4px 4px 0px var(--color-wood-highlight),
        inset -4px -4px 0px var(--color-wood-shadow);
  }

  /* Input/Select */
  .c-input-game {
    @apply w-full p-3 border-2 text-center uppercase text-2xl outline-none;
    font-family: var(--font-vt323);
    background-color: var(--color-input-bg);
    color: var(--color-input-text);
    border-color: var(--color-input-border);
  }
  .c-input-game:focus {
    border-color: var(--color-input-focus);
  }
  .c-input-game::placeholder {
    color: var(--color-input-placeholder);
  }
  
  .c-select-game {
    @apply w-full p-2 border-2 text-lg outline-none;
    font-family: var(--font-vt323);
    background-color: var(--color-input-bg);
    color: var(--color-input-text);
    border-color: var(--color-input-border);
  }

  /* Green Button */
  .c-btn-game {
    @apply py-4 px-6 text-2xl font-bold active:translate-y-1 active:shadow-none transition-all cursor-pointer shadow-lg outline-none;
    font-family: var(--font-press-start);
    background-color: var(--color-btn-green-bg);
    color: var(--color-btn-green-text);
    border: 4px solid var(--color-game-bg);
    box-shadow: 
        inset 4px 4px 0px var(--color-btn-green-light),
        inset -4px -4px 0px var(--color-btn-green-dark),
        4px 4px 0px rgba(0,0,0,0.5);
  }

  /* Scoreboard Item */
  .c-scoreboard-item {
    @apply shadow-2xl py-2 px-6 text-2xl flex-1 text-center;
    font-family: var(--font-vt323);
    color: var(--color-text-light);
    background-color: var(--color-wood-bg);
    background-image: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 4px,
        var(--color-wood-line) 4px,
        var(--color-wood-line) 8px
    );
    border: 4px solid var(--color-wood-border);
    box-shadow: 
        inset 4px 4px 0px var(--color-wood-highlight),
        inset -4px -4px 0px var(--color-wood-shadow);
  }

  /* Game Area Container */
  .c-game-area {
    @apply relative border-8 shadow-2xl mx-auto;
    border-color: var(--color-wood-border);
    background-color: var(--color-game-bg-transparent);
    /* Responsive Scaling */
    width: 100%;
    max-width: 900px;
    aspect-ratio: 3/2; /* Matches 600/400 Canvas Ratio */
  }
  
  .c-game-area canvas {
    width: 100% !important;
    height: 100% !important;
  }

  /* Error Overlay */
  .c-error-overlay {
    @apply border-4 flex flex-col items-center justify-center gap-4 p-8 text-center;
    font-family: var(--font-vt323);
    background-color: var(--color-game-bg);
    border-color: var(--color-wood-border);
    color: var(--color-text-light);
  }
  
  /* Text Styles */
  .c-text-title {
    font-family: var(--font-press-start);
    background: linear-gradient(to bottom, #FFEB3B 0%, #F57F17 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(4px 4px 0px #BF360C);
    text-shadow: 2px 2px 0 #000;
  }
  
  /* Hints */
  .c-hint-text {
    @apply mt-4 text-xl px-4 py-1;
    font-family: var(--font-vt323);
    color: var(--color-text-light);
    background-color: rgba(0, 0, 0, 0.5);
  }

  /* Decorative Tree */
  .c-tree-leaf {
    @apply rounded-full border-4 relative shadow-inner;
    background-color: var(--color-tree-leaf);
    border-color: var(--color-game-bg);
  }
  
  .c-tree-berry {
    @apply absolute w-2 h-2;
    background-color: var(--color-tree-berry);
  }
  
  .c-tree-trunk {
    @apply w-6 h-12 border-x-4 border-b-4 mx-auto;
    background-color: var(--color-tree-trunk);
    border-color: var(--color-game-bg);
  }

  /* Health Hearts */
  .c-heart {
    @apply w-6 h-6 border-2 border-black inline-block;
  }
  .c-heart-full {
    background-color: var(--color-health-heart);
  }
  .c-heart-half {
    background: linear-gradient(90deg, var(--color-health-heart) 50%, var(--color-health-empty) 50%);
  }
  .c-heart-empty {
    background-color: var(--color-health-empty);
  }
}
